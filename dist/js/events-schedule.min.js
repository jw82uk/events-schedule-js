"use strict";function ownKeys(t,e){var n,s=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,n)),s}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eventSchedule(e){var d=_objectSpread(_objectSpread({},{auto_update_time:0,container_id:"",descriptor_current_event:"Live now",descriptor_starting_soon:"Starting soon",events_wrapper_class:"",events_wrapper_html_element:"ul",events_html_element:"li",events_heading_level:"h3",filter_id:"",img_loading:"lazy",json_path:"",max_events:100,no_events_msg_html:'<p class="events-schedule__no-events-msg">There are no events to display.</p>',only_events_tagged:[],order_chronological:!0,query_string_key:"",show_descriptions:!0,show_event_types:!0,show_images:!0,show_live_events:!0,show_no_of_events_msg:!0,show_primary_links:!0,show_secondary_links:!0,show_tags_on_events:!0,show_upcoming_events:!0,starting_soon_mins:15,time_format_minute:"numeric",time_format_hour:"numeric",time_format_hour12:!1,time_format_day:"2-digit",time_format_month:"short",time_format_year:"numeric",time_locales:[],time_zone:"",timezone_abbr:"",timezone_msg_html:'<p class="events-schedule__timezone-msg">All event times are in your local time</p>',afterEventsLoad:function(){}}),e),_={day:d.time_format_day,month:d.time_format_month,year:d.time_format_year},o={hour12:d.time_format_hour12,hour:d.time_format_hour,minute:d.time_format_minute},i={day:d.time_format_day,month:d.time_format_month,year:d.time_format_year,hour12:d.time_format_hour12,hour:d.time_format_hour,minute:d.time_format_minute},l=d.time_locales,e=d.time_zone,h=(e&&(_.timeZone=e,o.timeZone=e,i.timeZone=e),{}),p="",g=0,f=0,y=0,w="",b=document.getElementById(d.container_id),t=new XMLHttpRequest;function n(){for(var e=(new Date).toUTCString(),t=new Date(e).getTime(),n=0;n<h.events.length;n++){var s=new Date(h.events[n].event_start).getTime(),r=new Date(h.events[n].event_end).getTime(),a=60*d.starting_soon_mins*1e3;s<t&&r<t?(h.events[n].event_status="past",0):t<s&&t<r?(h.events[n].event_status="future",f++):s<=t&&t<=r&&(h.events[n].event_status="present",g++),h.events[n].start_time_ms=s,h.events[n].duration_ms=r-s,a&&(h.events[n].starting_soon=s-t<a&&0<s-t)}for(var _=0;_<h.events.length;_++)h.events[_].relevant=!1;if(d.only_events_tagged.length)d.only_events_tagged.forEach(function(e){for(var t=0;t<h.events.length;t++){var n=h.events[t].tags.indexOf(e);!h.events[t].relevant&&-1<n&&(h.events[t].relevant=!0)}});else for(var o=0;o<h.events.length;o++)h.events[o].relevant=!0;if(w=L()[d.query_string_key],d.query_string_key&&w)for(var i=0;i<h.events.length;i++){var l=h.events[i].tags.indexOf(w);h.events[i].relevant&&l<0&&(h.events[i].relevant=!1)}if(!d.query_string_key&&0===d.only_events_tagged.length)for(var v=0;v<h.events.length;v++)h.events[v].relevant=!0;var c,m=d.max_events;if(y=0,p="",d.order_chronological&&(h.events.sort(function(e,t){return e.duration_ms-t.duration_ms}),h.events.sort(function(e,t){return e.start_time_ms-t.start_time_ms})),g||f)for(var u=0;u<h.events.length;u++)d.show_live_events&&"present"==h.events[u].event_status&&1==h.events[u].relevant&&y<m&&(p+=S(u),y++),d.show_upcoming_events&&"future"==h.events[u].event_status&&1==h.events[u].relevant&&y<m&&(p+=S(u),y++);b.classList.add("events-schedule"),0<y?(e="",c=d.events_wrapper_html_element,d.show_no_of_events_msg&&(1==y?e+='<p class="events-schedule__count">Showing '+y+" event</p>":1<y&&(e+='<p class="events-schedule__count">Showing '+y+" events</p>")),d.timezone_msg_html&&(e+=d.timezone_msg_html),e+="<"+c+' class="events-schedule__events-wrapper',d.events_wrapper_class&&(e+=" "+d.events_wrapper_class),e+='">'+p+"</"+c+">",b.innerHTML=e,d.afterEventsLoad()):d.no_events_msg_html?b.innerHTML=d.no_events_msg_html:b.innerHTML="",setTimeout(function(){for(var e="#"+d.container_id+" .events-schedule__event",t=document.querySelectorAll(e),n=0;n<t.length;n++)t[n].classList.add("events-schedule__event--opaque")},50)}function S(e){var t=new Date(h.events[e].event_start),n=new Date(h.events[e].event_end),s="",r=d.events_html_element,a=d.events_heading_level;return s+="<"+r+' class="events-schedule__event events-schedule__event--'+h.events[e].event_status+" events-schedule__event--starting-soon-"+h.events[e].starting_soon,h.events[e].event_type&&(s+=" events-schedule__event--"+h.events[e].event_type.toLowerCase().replace(/\s/g,"")+" "),h.events[e].custom_class&&(s+=" "+h.events[e].custom_class+" "),s+='">',d.show_images&&h.events[e].img_path&&(s+='<div class="events-schedule__img-wrapper"><img class="events-schedule__img" src="'+h.events[e].img_path+'" alt="'+h.events[e].img_alt+'" loading="'+d.img_loading+'" /></div>'),s=(s+='<div class="events-schedule__details">')+("<"+a+' class="events-schedule__title">'+h.events[e].event_title+"</"+a+">")+'<p class="events-schedule__time">',t.toLocaleDateString(l,_)==n.toLocaleDateString(l,_)?s+='<time datetime="'+t.toLocaleString(l,i)+'">'+t.toLocaleDateString(l,_)+", "+t.toLocaleTimeString(l,o)+'</time> <span aria-hidden="true">-</span><span class="sr-only">Until</span> <time datetime="'+n.toLocaleString(l,i)+'">'+n.toLocaleTimeString(l,o)+"</time>":s+='<time datetime="'+t.toLocaleString(l,i)+'">'+t.toLocaleDateString(l,_)+", "+t.toLocaleTimeString(l,o)+'</time> <span aria-hidden="true">-</span><span class="sr-only">Until</span> <time datetime="'+n.toLocaleString(l,i)+'">'+n.toLocaleDateString(l,_)+", "+n.toLocaleTimeString(l,o)+"</time>",d.timezone_abbr&&(s+=" "+d.timezone_abbr),s+="</p>",h.events[e].starting_soon&&(s+='<p class="events-schedule__status events-schedule__status--soon">'+d.descriptor_starting_soon+"</p>"),"present"==h.events[e].event_status&&d.descriptor_current_event&&(s+='<p class="events-schedule__status events-schedule__status--live">'+d.descriptor_current_event+"</p>"),d.show_event_types&&h.events[e].event_type&&(s+='<p class="events-schedule__type">'+h.events[e].event_type+"</p>"),d.show_descriptions&&h.events[e].event_desc_html&&(s+='<div class="events-schedule__description">'+h.events[e].event_desc_html+"</div>"),d.show_tags_on_events&&h.events[e].tags.length&&((a=h.events[e].tags).length&&(s+='<p class="events-schedule__tags">'+a.join(", ")+"</p>")),d.show_primary_links&&h.events[e].primary_link_text&&(s+='<a class="events-schedule__link events-schedule__link--primary" href="'+h.events[e].primary_link_url+'" aria-label="'+h.events[e].primary_link_aria_label+'">'+h.events[e].primary_link_text+"</a>"),d.show_secondary_links&&h.events[e].secondary_link_text&&(s+='<a class="events-schedule__link events-schedule__link--secondary" href="'+h.events[e].secondary_link_url+'" aria-label="'+h.events[e].secondary_link_aria_label+'">'+h.events[e].secondary_link_text+"</a>"),s+="</div></"+r+">"}t.onreadystatechange=function(){4===t.readyState&&200===t.status&&(h=JSON.parse(t.responseText),n(),(w=L()[d.query_string_key])&&(document.getElementById(d.filter_id).value=w))},t.open("GET",d.json_path+"?"+Math.random()),t.send(),d.auto_update_time&&(e=1e3*d.auto_update_time,setInterval(n,e));e=document.getElementById(d.filter_id);function L(e){var e=e?e.split("?")[1]:window.location.search.slice(1),t={};if(e)for(var n=(e=e.split("#")[0]).split("&"),s=0;s<n.length;s++){var r,a,_=n[s].split("="),o=_[0],_=void 0===_[1]||_[1],o=o.toLowerCase();"string"==typeof _&&(_=_.toLowerCase()),o.match(/\[(\d+)?\]$/)?(t[r=o.replace(/\[(\d+)?\]/,"")]||(t[r]=[]),o.match(/\[\d+\]$/)?(a=/\[(\d+)\]/.exec(o)[1],t[r][a]=_):t[r].push(_)):t[o]?(t[o]&&"string"==typeof t[o]&&(t[o]=[t[o]]),t[o].push(_)):t[o]=_}return t}e&&d.query_string_key&&e.addEventListener("input",function(){var e=function(e,t,n){e=e||window.location.href;var s,r,a=document.createElement("a"),_=new RegExp(t+"((?:\\[[^\\]]*\\])?)(=|$)(.*)"),o=!1;if(a.href=e,a.search){for(s=a.search.replace(/^\?/,"").split(/&(?:amp;)?/),r=s.length;0<r;)s[--r]?_.test(s[r])&&(s[r]=s[r].replace(_,t+"$1")+"="+n,o=!0):s.splice(r,1);o||s.push(t+"="+n),a.search="?"+s.join("&")}else a.search="?"+t+"="+n;return a.href}(window.location.href,d.query_string_key,this.value);history.pushState({id:"Event Schedule"},1,e),n()})}